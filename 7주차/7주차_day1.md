# [7ì£¼ì°¨ - Day1] 240408 ì •ë¦¬

# ğŸ“Œ ë„ì„œ API ì„¤ê³„ (ì¶”ê°€)

## âœ”ï¸ ì¢‹ì•„ìš” API

### 1ï¸âƒ£ **ì¢‹ì•„ìš” ì¶”ê°€**

likesì— ì¢‹ì•„ìš” í–‰ ì¶”ê°€

| HTTP Method      | POST            |
| ---------------- | --------------- |
| URI              | /likes/{bookId} |
| HTTP status code | ì„±ê³µ(200)       |
| Request Body     |                 |
| Response Body    |                 |

### 2ï¸âƒ£ **ì¢‹ì•„ìš” ì·¨ì†Œ**

// likesì— ì¢‹ì•„ìš” í–‰ ì‚­ì œ

| HTTP Method      | DELETE          |
| ---------------- | --------------- |
| URI              | /likes/{bookId} |
| HTTP status code | ì„±ê³µ(200)       |
| Request Body     |                 |
| Response Body    |                 |

## âœ”ï¸ ì£¼ë¬¸ API

### 1ï¸âƒ£ **ì¥ë°”êµ¬ë‹ˆì—ì„œ ì„ íƒí•œ ì£¼ë¬¸ ìƒí’ˆ ëª©ë¡ ì¡°íšŒ (ìˆ˜ì •)**

request bodyì— (ì—¬ëŸ¬ ê°œ) ì„ íƒí•œ ì¥ë°”êµ¬ë‹ˆ ìƒí’ˆ idë“¤ì„ ë¦¬ìŠ¤íŠ¸ë¡œ ëª¨ì•„ì„œ ë³´ë‚´ì¤€ë‹¤.
| HTTP Method | GET |
| --- | --- |
| URI | /cart |
| HTTP status code | ì„±ê³µ(200) |
| Request Body | [ cartItemId, cartItemId, â€¦ ] |
| Response Body | {
[
cartItemId: â€œì¥ë°”êµ¬ë‹ˆ ë„ì„œ idâ€,
bookId: â€œë„ì„œ idâ€,
title: â€œë„ì„œ ì œëª©â€,
summary: â€œìš”ì•½ ì •ë³´â€,
price: â€œê°€ê²©â€,
count: â€œë„ì„œ ìˆ˜ëŸ‰â€
],
[
cartItemId: â€œì¥ë°”êµ¬ë‹ˆ ë„ì„œ idâ€,
bookId: â€œë„ì„œ idâ€,
title: â€œë„ì„œ ì œëª©â€,
summary: â€œìš”ì•½ ì •ë³´â€,
price: â€œê°€ê²©â€,
count: â€œë„ì„œ ìˆ˜ëŸ‰â€
], â€¦
} |

## âœ”ï¸ ê²°ì œ API

### 1ï¸âƒ£ **ê²°ì œ ìš”ì²­**

ê²°ì œë¥¼ í•œë‹¤ = ì£¼ë¬¸ í•œë‹¤ </br>
ì£¼ë¬¸ì„ í•˜ë©´ ì£¼ë¬¸ DBì— ì£¼ë¬¸ê²°ê³¼ë¥¼ INSERTí•˜ê²Œ ëœë‹¤.
| HTTP Method | POST |
| --- | --- |
| URI | /orders |
| HTTP status code | ì„±ê³µ(200) |
| Request Body | {
items: [{
cartItem: â€œì¥ë°”êµ¬ë‹ˆ ë„ì„œ idâ€,
bookId: â€œë„ì„œ idâ€,
count: ìˆ˜ëŸ‰
},
{
cartItem: â€œì¥ë°”êµ¬ë‹ˆ ë„ì„œ idâ€,
bookId: â€œë„ì„œ idâ€,
count: ìˆ˜ëŸ‰
}, â€¦
],
delivery: {
address: â€œì£¼ì†Œâ€,
recipient: â€œìˆ˜ë ¹ì¸â€,
contact: â€œì „í™”ë²ˆí˜¸â€
},
totalPrice: ì´ ê¸ˆì•¡
} |
| Response Body | |

ğŸ’¡ ì¥ë°”êµ¬ë‹ˆì—ì„œ ì£¼ë¬¸(ê²°ì œ) ì™„ë£Œëœ ìƒí’ˆì€ ì¥ë°”êµ¬ë‹ˆ DBì—ì„œ ì‚­ì œëœë‹¤.

### 2ï¸âƒ£ **ì£¼ë¬¸ ëª©ë¡ ì¡°íšŒ**

ë°°ì†¡ì •ë³´ëŠ” deliveryì— JSONí˜•ì‹ìœ¼ë¡œ ë‹´ì•„ì„œ ë³´ë‚´ì¤€ë‹¤.

| HTTP Method      | GET       |
| ---------------- | --------- |
| URI              | /orders   |
| HTTP status code | ì„±ê³µ(200) |
| Request Body     |           |
| Response Body    | [         |

    {
        order_id: â€œì£¼ë¬¸ idâ€,
        orderedDate: â€œì£¼ë¬¸ ì¼ìâ€,
        delivery: {
            address: â€œì£¼ì†Œâ€,
            recipient: â€œìˆ˜ë ¹ì¸â€,
            contact: â€œì „í™”ë²ˆí˜¸â€
        },
        bookTitle: â€œëŒ€í‘œ ì±… ì œëª©â€,
        totalPrice: â€œì´ ê²°ì œ ê¸ˆì•¡â€,
        totalCount: â€œì´ ìˆ˜ëŸ‰â€
    },
    â€¦

] |

### 3ï¸âƒ£ **ì£¼ë¬¸ ìƒì„¸ ìƒí’ˆ ì¡°íšŒ (ì£¼ë¬¸ ìƒì„¸)**

ì£¼ë¬¸ì´ ì™„ë£Œëœ ë„ì„œì˜ idë¥¼ urië¡œ ë°›ê³  í•´ë‹¹ ë„ì„œ idì— í•´ë‹¹í•˜ëŠ” ì •ë³´ë¥¼ ì‘ë‹µìœ¼ë¡œ ì¤€ë‹¤.
| HTTP Method | GET |
| --- | --- |
| URI | /orders/{bookId} |
| HTTP status code | ì„±ê³µ(200) |
| Request Body | |
| Response Body | [
{
bookId: â€œë„ì„œ idâ€,
bookTitle: â€œë„ì„œ ì œëª©â€,
author: â€œì‘ê°€â€,
price: â€œê°€ê²©â€,
count: â€œìˆ˜ëŸ‰â€
},
{
bookId: â€œë„ì„œ idâ€,
bookTitle: â€œë„ì„œ ì œëª©â€,
author: â€œì‘ê°€â€,
price: â€œê°€ê²©â€,
count: â€œìˆ˜ëŸ‰â€
},
â€¦
] |

# ğŸ“Œ ë„ì„œ DB ì˜ˆì‹œ

### 1ï¸âƒ£ **users (íšŒì›)**

- id: íšŒì› id
- username: íšŒì› ì´ë¦„
- role: íšŒì› or ê´€ë¦¬ì
- created_at: íšŒì› ê°€ì…ì¼

| id  | username | role | created_at |
| --- | -------- | ---- | ---------- |
| 1   | ì§±êµ¬     | user | 2024-01-01 |
| 2   | ì² ìˆ˜     | user | 2024-01-01 |
| 3   | í›ˆì´     | user | 2024-01-03 |
| 4   | ìœ ë¦¬     | user | 2024-01-04 |
| 5   | ë§¹êµ¬     | user | 2024-01-04 |

### 2ï¸âƒ£ **books (ë„ì„œ ì •ë³´)**

- id: ë„ì„œ id
- title: ë„ì„œ ì œëª©
- summary: ìš”ì•½ ì •ë³´
- price: ë„ì„œ ê°€ê²©
- ... (ë„ì„œAPIì—ì„œ ì„¤ê³„ëœ ì •ë³´ë“¤)

| id  | title | summary | price | author | pubDate |
| --- | ----- | ------- | ----- | ------ | ------- |
| 1   | book1 | ...     |       |        |         |
| 2   | book2 | ...     |       |        |         |
| 3   | book3 | ...     |       |        |         |
| 4   | book4 | ...     |       |        |         |
| 5   | book5 | ...     |       |        |         |

### 3ï¸âƒ£ **likes (ì¢‹ì•„ìš”)**

- user_id: ì¢‹ì•„ìš”ë¥¼ í•œ íšŒì› id
- liked_book_id: í•´ë‹¹ íšŒì›ì´ ì¢‹ì•„ìš”ë¥¼ í•œ ë„ì„œ id

| user_id | liked_book_id |
| ------- | ------------- |
| 1       | 1             |
| 1       | 5             |
| 1       | 7             |
| 3       | 1             |
| 4       | 5             |
| 6       | 5             |

### 4ï¸âƒ£ **cartsItems (ì¥ë°”êµ¬ë‹ˆ)**

- cart_id: ì¥ë°”êµ¬ë‹ˆ id
- book_id: ì¥ë°”êµ¬ë‹ˆì— ë‹´ì€ ë„ì„œì˜ id
- count: ì¥ë°”êµ¬ë‹ˆì— ë‹´ì€ ë„ì„œ ìˆ˜ëŸ‰

| cart_id(PK) | book_id(FK) | count |
| ----------- | ----------- | ----- |
| 1           | 1           | 1     |
| 2           | 3           | 2     |
| 3           | 2           | 1     |
| 4           |             |       |
| 5           |             |       |
| 6           |             |       |

### 5ï¸âƒ£ **delivery (ë°°ì†¡ ì •ë³´)**

- id: ë°°ì†¡ id
- address: ë°°ì†¡ì§€
- recipient: ìˆ˜ë ¹ì¸ (ì£¼ë¬¸ì)
- contact: ì „í™”ë²ˆí˜¸

| id  | address       | recipient | contact       |
| --- | ------------- | --------- | ------------- |
| 1   | ì„œìš¸ì‹œ ì†¡íŒŒêµ¬ | ê°•ì •ìœ¤    | 010-1111-2222 |
| 2   | ê²½ê¸°ë„ ìš©ì¸ì‹œ | ê¹€ë•¡ë•¡    | 010-3333-4444 |

### 6ï¸âƒ£ **orders (ì¥ë°”êµ¬ë‹ˆì—ì„œ íŒŒìƒëœ ì£¼ë¬¸ë‚´ì—­)**

- order_id: ì£¼ë¬¸ id
- delivery_id: ë°°ì†¡ id
- total_price: ì´ ê²°ì œ ê¸ˆì•¡
- created_at: ì£¼ë¬¸ì¼ì
- book_title: ëŒ€í‘œ ì±… ì œëª©
- total_count: ì£¼ë¬¸ ë„ì„œ ì´ ìˆ˜ëŸ‰

ğŸ’¡ ì¥ë°”êµ¬ë‹ˆì—ì„œ ì„ íƒí•œ ë‚´ì—­ì„ í™”ë©´ì— ì¶œë ¥í•˜ëŠ” ê²ƒ

| order_id | delivery_id | total_price | created_at | book_title    | total_count |
| -------- | ----------- | ----------- | ---------- | ------------- | ----------- |
| 1        | 1           | 28000       |            | ëŒ€í‘œ ì±… ì œëª©1 | 4           |
|          |             |             |            |               |             |

### 7ï¸âƒ£ **orderedBook (ì¥ë°”êµ¬ë‹ˆì—ì„œ ê²°ì œëœ ë„ì„œ ì •ë³´)**

- order_id: ì£¼ë¬¸ id
- book_id: ì£¼ë¬¸ ë„ì„œ id
- count: ë„ì„œ ì£¼ë¬¸ ìˆ˜ëŸ‰

| order_id | book_id | count |
| -------- | ------- | ----- |
| 1        | 2       | 1     |
| 1        | 3       | 2     |
| 1        | 4       | 1     |
